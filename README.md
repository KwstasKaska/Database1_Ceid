# Database1_Ceid

Here is a uni project in basic learning of SQL(Sql queries,procedures,triggers).
I will upload the Schema of the database and the files that contain the code for each category.Unfortunately the Schema is written in greeklish.
This project was a team project.

The initial description of the database in greek:

Η ΒΔ πρόκειται να υποστηρίξει τη λειτουργία ενός συστήματος προσλήψεων προσωπικού
(e-recruitment) το οποίο χρησιμοποιούν επιχειρήσεις που αναρτούν διαθέσιμες θέσεις
εργασίας και υποψήφιοι που αναζητούν εργασία. Ακολουθούν οι λειτουργικές
προδιαγραφές που έχουν συγκεντρωθεί μετά από επικοινωνία με τον πελάτη:


Οι χρήστες του συστήματος διακρίνονται σε δύο κατηγορίες: Υποψήφιοι (που κάνουν
αιτήσεις για τις διαθέσιμες θέσεις εργασίας) και Υπεύθυνοι Προσλήψεων (που ανακοινώνουν
τις θέσεις εργασίας). Για τους χρήστες του συστήματος διατηρούμε πληροφορίες για το
username (μοναδικό για κάθε χρήστη), το password, το όνομα και το επίθετο, ένα email και την
ημερομηνία εγγραφής. Για κάθε Υποψήφιο το σύστημα αποθηκεύει ένα βιογραφικό, τις ξένες
γλώσσες που γνωρίζει (μία ή και περισσότερες), το όνομα του αρχείου με τις συστατικές
επιστολές (θεωρούμε ότι κάθε υποψήφιος μπορεί να υποβάλει στο σύστημα ένα αρχείο με
όλες τις συστατικές επιστολές του), καθώς και ένα κείμενο όπου αναφέρονται τυχόν
πιστοποιήσεις που έχει.
Κάθε υποψήφιος διαθέτει ένα ή περισσότερα πτυχία και για καθένα από αυτά
καταγράφουμε τον τίτλο του και το ίδρυμα που το απονέμει (ο συνδυασμός τίτλου και
ιδρύματος θεωρείται μοναδικός), τη βαθμίδα του (Λύκειο, Πανεπιστήμιο, Μεταπτυχιακό και
Διδακτορικό), το έτος κτήσης και το βαθμό του υποψηφίου στο πτυχίο. Ένα Πτυχίο μπορεί να
το κατέχουν περισσότεροι από ένας υποψήφιοι, αλλά τουλάχιστον ένας. Ένας υποψήφιος θα
μπορεί και να μην κατέχει κάποιο πτυχίο.
Επιπλέον οι υποψήφιοι μπορούν να καταγράψουν στο σύστημα τα projects που έχουν
υλοποιήσει. Για project αποθηκεύεται μια περιγραφή της υλοποίησης, ένα url όπου είναι
διαθέσιμος ο κώδικας και άλλες σχετικές πληροφορίες και κάθε project και έχει έναν αύξοντα
αριθμό μοναδικό για τον υποψήφιο που το έχει υλοποιήσει (το πρώτο project που υποβάλει ο
υποψήφιος στο σύστημα έχει τον α/α 1, το δεύτερο το 2 κ.ο.κ. και αυτό ισχυει για κάθε
υποψήφιο). Ένας υποψήφιος μπορεί να μην έχει κάποιο project.
Κάθε Υπεύθ. Προσλήψεων εργάζεται σε μία εταιρεία και το σύστημα αποθηκεύει για αυτόν
τα έτη προϋπηρεσίας του (όχι στη συγκεκριμένη εταιρεία αλλά συνολικά ως υπεύθυνος
προσλήψεων). Για τις Εταιρείες το σύστημα διατηρεί στοιχεία για το ΑΦΜ (μοναδικό), τη ΔΟΥ,
το τηλέφωνο και την έδρα (οδός, αριθμός, πόλη και χώρα). Μια Εταιρεία μπορεί να απασχολεί
πολλούς Υπευθύνους Προσλήψεων. Κάθε ανακοίνωση θέσης εργασίας από έναν Υπεύθυνο
Προσλήψεων συνοδεύεται από την ημερομηνία ανακοίνωσης και την ημερομηνία λήξης
υποβολών.
Για κάθε θέση εργασίας διατηρούμε έναν κωδικό (μοναδικό), τον τίτλο της, την έδρα όπου
θα εργάζεται ο υποψήφιος που θα προσληφθεί, τον μισθό της και την ημερομηνία έναρξης
εργασίας. Επιπλέον, κάθε θέση εργασίας αφορά ένα (τουλάχιστον) ή περισσότερα αντικείμενα
για τα οποία αποθηκεύουμε τίτλο (μοναδικός) και περιγραφή. Κάθε αντικείμενο μπορεί να
ανήκει σε ένα γενικότερο αντικείμενο (και κάθε αντικείμενο μπορεί να περιέχει πολλά πιο
ειδικά αντικείμενα). Περισσότερες από μία θέσεις εργασίας μπορούν να αφορούν το ίδιο
αντικείμενο. 



The changes that i was assigned to do :


Σε πρώτη φάση θα χρειαστεί να επεκτείνετε τη ΒΔ ώστε να διατηρεί πληροφορίες που αφορούν:
i. Τη διαδικασία συνεντεύξεων και αξιολόγησης των αιτήσεων. Στο σύστημα θέλουμε να
διατηρείται πληροφορία για τις συνεντεύξεις που έχουν γίνει στα πλαίσια της διαδικασίας
αξιολόγησης των αιτήσεων (κάθε συνέντευξη γίνεται μεταξύ του recruiter που την
δημοσίευσε και ενός από τους υποψηφίους). Για κάθε συνέντευξη θα διατηρείται μια
ημερομηνία και ώρα έναρξης, η διάρκειά της, προαιρετικά κάποια σχόλια και ένα σκορ (1-
5) που εισάγει ο υπεύθυνος προσλήψεων στο κριτήριο personality του υποψηφίου. Στα
πλαίσια μιας αίτησης ένας υποψήφιος μπορεί να κληθεί σε περισσότερες από 1
συνεντεύξεις. Συνολικά, κάθε υποψήφιος βαθμολογείται με βάση το σκορ του στη
συνέντευξη (personality), την εκπαίδευσή του (education) και την προηγούμενη
επαγγελματική εμπειρία του (experience). Μηδενική βαθμολογία σε οποιοδήποτε από τα
κριτήρια σημαίνει ότι ο υποψήφιος δεν είναι επιλέξιμος για τη θέση (δεν πληρεί τις τυπικές
προδιαγραφές) και άρα είναι εκτός τελικής κατάταξης.
ii. Τους τομείς στους οποίους δραστηριοποιείται κάθε εταιρεία. Κάθε εταιρεία θα δηλώνει
τους τομείς στους οποίους δραστηριοποιείται (ένας ή περισσότεροι). Κάθε τομέας μπορεί
να ανήκει σε έναν ευρύτερο τομέα και να περιλαμβάνει έναν ή περισσότερους επιμέρους
τομείς. Κατασκευάστε 2 ιεραρχίες τομέων με θέματα Computer Engineering και βάθος έως
3 (δηλ. ορίστε 2 βασικούς τομείς και υποτομείς 1ου και 2ου επιπέδου σε αυτούς). Για κάθε
τομέα καταγράφουμε τον τίτλο του και ένα σύντομο κείμενο (μπορεί να περιέχει σχετικούς
όρους-κλειδιά ή μια σύντομη περιγραφή).
2/6
iii. Την καταγραφή ιστορικού ενεργειών. Θα πρέπει να κατασκευαστεί ένας πίνακας στον
οποίο θα καταγράφονται οι ενέργειες που εκτελούνται από οποιοδήποτε χρήστη (recruiter
ή candidate) μέσω της εφαρμογής που θα υλοποιήσετε στο μέρος Β. Ο πίνακας αυτός θα
ενημερώνεται κάθε φορά που επιχειρείται μια ενέργεια εισαγωγής, επεξεργασίας ή
διαγραφής δεδομένων και θα καταγράφει το username του χρήστη, την ημερομηνία και
ώρα του συμβάντος, το αν εκτελέστηκε επιτυχώς ή όχι, το είδος της (insert, update, ή
delete) και το όνομα του πίνακα που αφορούσε (περισσότερες λεπτομέρειες ακολουθούν).
1. (1 μονάδα) Σχεδιάστε το σχεσιακό διάγραμμα της συνολικής αναθεωρημένης ΒΔ (μετά τις
επεκτάσεις που προαναφέρθηκαν) και καταγράψτε τυχόν παραδοχές της σχεδίασής σας
2. (1 μονάδα) Κατασκευάστε τους νέους πίνακες στη ΒΔ συντάσσοντας ένα σύνολο εντολών
create και insert ώστε να κατασκευαστούν οι απαραίτητες σχέσεις και να γεμίσουν με ικανό
όγκο δεδομένων που θα επιτρέψει τον έλεγχο της σωστής λειτουργίας της ΒΔ και την
εκτέλεση των queries, των triggers και των stored procedures που ζητούνται στη συνέχεια.
3. (2 μονάδες) Συντάξτε ερωτήματα (queries) σε SQL που να απαντούν στα παρακάτω
(ονοματίστε κατάλληλα τις στήλες των αποτελεσμάτων):
a. Για τις θέσεις εργασίας που έχουν μισθό μεγαλύτερο από 1900 ευρώ να
εμφανίζεται το ονοματεπώνυμο του recruiter, το όνομα της εταιρείας, ο κωδικός
της θέσης, ο μισθός και το πλήθος των αιτήσεων υποψηφίων για κάθε μία από
αυτές.
b. To username, το όνομα του αρχείου με τα certificates, το πλήθος των πτυχίων που
έχει κάθε υποψήφιος και το μέσο όρο της βαθμολογίας του από αυτά, για τους
υποψήφιους που έχουν περισσότερα από 1 πτυχία.
c. Το username των υποψηφίων, το πλήθος των αιτήσεων που έχουν υποβάλει για
θέσεις εργασίας, και ο μέσος όρος των μισθών για τις θέσεις αυτές, εφόσον είναι
μεγαλύτερος από 1800 ευρώ
d. Τα ονόματα των εταιρειών με έδρα την Πάτρα που έχουν ανακοινώσει θέσεις
εργασίας με αντικείμενο που περιλαμβάνει στον τίτλο του το string ‘Program’, την
περιγραφή των θέσεων αυτών (position), καθώς και τον τίτλο των αντικειμένων που
σχετίζονται με τις θέσεις
e. Tο username των υπεύθυνων προσλήψεων, το πλήθος των θέσεων που έχουν
ανακοινώσει, το πλήθος των συνεντεύξεων και το μέσο όρο των μισθών των
θέσεων αυτών για τους υπεύθυνους με περισσότερες από 2 αναρτήσεις θέσεων
στο σύστημα (η ταξινόμηση να γίνει με βάση το μέσο μισθό των θέσεων κάθε
υπευθύνου ξεκινώντας από το μεγαλύτερη τιμή)
4. (2 μονάδες) Κατασκευάστε τα ακόλουθα:
a. Stored procedure που θα δέχεται σαν είσοδο το id μιας θέσης εργασίας και εφόσον
έχουν αξιολογηθεί οι αιτήσεις όλων των υποψηφίων της θα εμφανίζει λίστα
κατάταξης (ξεκινώντας από αυτόν που θα επιλεγεί) με τις επιμέρους και την
συνολική βαθμολογία
1
κάθε υποψηφίου καθώς και το πλήθος των συνεντεύξεων
που έδωσε. Σε περίπτωση που υπάρχουν υποψήφιοι που δεν πληρούν τις τυπικές
προδιαγραφές της θέσης θα πρέπει να εμφανιστούν σε δεύτερη λίστα όπου θα
αναγράφεται ο λόγος ή οι λόγοι απόρριψής τους με βάση το/α πεδίο/α της
βαθμολογίας που έχει 0 (‘no prior experience’, ‘inadequate education’, ‘failed the
interview’). Η αιτιολογία θα πρέπει να προκύπτει συνδυάζοντας σε ένααλφαριθμητικό όλες τις επιμέρους αιτιολογίες
2
. Αν η αξιολόγηση της θέσης δεν έχει
ολοκληρωθεί, να εμφανίζεται σχετικό μήνυμα.
b. Triggers που για κάθε ενέργεια εισαγωγής, ενημέρωσης ή διαγραφής στους πίνακες
candidate, recruiter, user, etaireia και job θα ενημερώνουν το σχετικό πίνακα
καταγραφής ιστορικού (βλ. iii). Ειδικά στην περίπτωση ενημέρωσης των στοιχείων
μιας εταιρείας ο αντίστοιχος trigger δε θα επιτρέπει αλλαγή στα πεδία ΑΦΜ, ΔΟΥ
και όνομα (θα γίνεται η ενημέρωση αλλά θα διατηρεί την προηγούμενη τιμή στα
πεδία αυτά).
c. Trigger που θα αποτρέπει τη διαγραφή μιας αίτησης υποψηφίου σε κάποια θέση αν
έχει παρέλθει η ημερομηνία υποβολής αιτήσεων. 
